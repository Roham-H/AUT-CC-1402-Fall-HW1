```
---
عنوان: گزارش تمرین اول
نام: رهام هایدی
شماره دانشجویی: ۹۸۳۱۱۰۷
---
```
## سرویس اول

این سرویس دریافت‌کننده درخواستهای احراز هویت و همچنین راه استعلام نتیجه آنهاست.

### _/register_

ثبت درخواست احراز هویت از این مسیر انجام می‌گیرد.
منطق کد شامل دریافت ورودیها، از جمله دو عکس در قالب base64 می‌شود.

در دیتابیس با کدملی ورودی جستجو می‌شود، در صورتی که کدملی ورودی درخواست احراز تمام نشده داشته باشد خطای مناسب داده می‌شود.
در غیر این صورت درخواست کاربر با اطلاعات ورودی ساخته شده، به دیتابیس اضافه شده و یک شناسه یکتا برای آن تولید می‌شود، دو عکس کاربر در `s3` آپلود شده و شناسه تولید شده درخواست به صف `rabbitmq` اضافه می‌شود.

### _/registration-inquiry_

در صورت معتبر بودن آیپی، نتیجه آخرین درخواست احراز هویت را اعلام می‌کند.

## سرویس دوم

این سرویس وظیفه خواندن شناسه درخواست احراز هویت کاربران از صف و پردازش آنها را بر عهده دارد.

هر شناسه موجود در صف خوانده شده و در دیتابیس جستجو می‌شود، در صورت وجود ردیف، پسوند تصاویر درخواست خوانده شده و تصاویر از `s3` دریافت می‌شوند.

به ازای هر تصویر سرویس تشخیص وجود چهره فراخوانی شده و در صورت نبودن چهره در هرکدام درخواست با علت عدم وجود چهره ناموفق اعلام می‌شود.

در صورت شناسایی چهره در تصاویر، اولین چهره‌های هر تصویر برای سرویس تشخیص تشابه چهره ارسال شده و در صورت تشابه بالای ۸۰، درخواست به شکل موفق ثبت می‌شود.
در غیر این صورت با علت عدم شباهت درخواست ناموفق خوانده می‌شود.

در هر مرحله نهایی شدن وضعیت درخواست احراز هویت، ایمیل نتیجه به ایمیل ورودی کاربر ارسال می‌گردد.

## سرویسهای استفاده شده

|Service|Provider|
| :---: | :----: |
|DBaaS|Aiven|
|S3|ArvanCloud|
|RabbitMQ|CloudAMQP|
|Face Detector|IMGGA|
|Email|Mailgun|

اطلاعات لازم جهت استفاده از هر سرویس باید در پوشه `config` هر اپلیکیشن نوشته شوند.
